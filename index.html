<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>阳明侠每日一说 - 直播模板</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            overflow: hidden;
            height: 100vh;
            position: relative;
        }
        
        .mobile-live-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* 上部：交易看板 - 占60% */
        .trading-section {
            height: 60vh;
            position: relative;
            z-index: 10;
        }
        
        /* 中部：新闻滚动条 - 精简高度 */
        .news-section {
            height: 6vh;
            background: rgba(255, 255, 255, 0.03);
            overflow: hidden;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            position: relative;
            z-index: 5;
        }
        
        .news-scroll-container {
            height: 100%;
            width: 100%;
            overflow: hidden;
            position: relative;
            display: flex;
            align-items: center;
        }
        
        .news-content {
            position: absolute;
            white-space: nowrap;
            animation: scrollNews 25s linear infinite;
        }
        
        .news-item {
            display: inline-block;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
            padding: 3px 12px;
            border-radius: 12px;
            margin-right: 15px;
            border-left: 2px solid #4ecdc4;
        }
        
        .news-title {
            font-size: 0.75em;
            font-weight: 600;
            color: #e0e0e0;
        }
        
        @keyframes scrollNews {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        
        /* 下部：内容区域 - 占34% */
        .content-section {
            height: 34vh;
            background: rgba(10, 10, 20, 0.85);
            position: relative;
            padding: 15px;
            z-index: 8;
        }
        
        /* 阳明侠标题 - 左上角紧凑设计 */
        .saying-header {
            position: absolute;
            top: 10px;
            left: 15px;
            z-index: 20;
        }
        
        .saying-title {
            font-size: 1.2em;
            font-weight: bold;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(78, 205, 196, 0.3);
        }
        
        /* 主要内容区域 - 更大的显示空间 */
        .saying-content {
            font-size: 1.3em;
            color: #f8f8f8;
            line-height: 1.6;
            text-align: center;
            padding: 50px 20px 20px 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border: 1px solid rgba(78, 205, 196, 0.3);
            min-height: calc(34vh - 40px);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
        }
        
        /* 阳明侠头像区域 - 使用AI生成的真实感头像 */
        .ai-character {
            position: absolute;
            right: 20px;
            bottom: 20px;
            text-align: center;
            width: 100px;
        }
        
        .ai-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 8px;
            border: 2px solid #4ecdc4;
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.4);
            overflow: hidden;
            background: #2c3e50;
        }
        
        .ai-image {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            background: linear-gradient(45deg, #34495e, #2c3e50);
        }
        
        .ai-name {
            font-size: 1em;
            font-weight: bold;
            color: #4ecdc4;
            text-shadow: 0 0 6px rgba(78, 205, 196, 0.4);
        }
        
        .speech-status {
            position: absolute;
            bottom: 10px;
            left: 20px;
            font-size: 0.8em;
            color: #bdc3c7;
            opacity: 0.9;
        }
        
        /* 隐藏互动层 */
        .interactive-overlay {
            position: absolute;
            top: 60vh;
            left: 0;
            width: 100%;
            height: 40vh;
            z-index: 100;
            opacity: 0;
            cursor: pointer;
        }
        
        .interactive-panel {
            position: absolute;
            bottom: 15px;
            right: 130px;
            background: rgba(0, 0, 0, 0.9);
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #4ecdc4;
            display: none;
            z-index: 200;
        }
        
        .interactive-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            border-radius: 12px;
            color: white;
            padding: 5px 10px;
            margin: 3px 0;
            cursor: pointer;
            font-size: 0.8em;
            display: block;
            width: 100%;
        }
        
        .embedded-frame {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .speaking {
            animation: textGlow 2s ease-in-out infinite;
        }
        
        @keyframes textGlow {
            0%, 100% { 
                text-shadow: 0 0 5px rgba(255, 255, 255, 0.4);
            }
            50% { 
                text-shadow: 0 0 12px rgba(255, 255, 255, 0.8),
                           0 0 20px rgba(78, 205, 196, 0.5);
            }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-2px); }
        }
    </style>
</head>
<body>
    <div class="mobile-live-container">
        <!-- 上部：交易看板 (60%) -->
        <div class="trading-section">
            <iframe 
                class="embedded-frame" 
                id="tradingIframe"
                src="https://trading-live-widget.vercel.app/"
                allow="autoplay">
            </iframe>
        </div>
        
        <!-- 中部：新闻滚动条 (6%) -->
        <div class="news-section">
            <div class="news-scroll-container">
                <div class="news-content" id="newsContent">
                    <!-- 新闻内容由JavaScript动态生成 -->
                </div>
            </div>
        </div>
        
        <!-- 下部：内容区域 (34%) -->
        <div class="content-section">
            <!-- 阳明侠标题 - 左上角 -->
            <div class="saying-header">
                <div class="saying-title">阳明侠每日一说</div>
            </div>
            
            <!-- 主要内容 -->
            <div class="saying-content" id="sayingContent">
                <!-- 每日一说内容由JavaScript动态生成 -->
            </div>
            
            <!-- 阳明侠头像 -->
            <div class="ai-character">
                <div class="ai-avatar">
                    <img class="ai-image" id="aiAvatar" src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200&h=200&fit=crop&crop=face&fp-x=0.5&fp-y=0.5&fp-z=1&facepad=3" alt="阳明侠">
                </div>
                <div class="ai-name">阳明侠</div>
            </div>
            
            <!-- 语音状态 -->
            <div class="speech-status" id="speechStatus">
                🎙️ AI语音播报准备中...
            </div>
        </div>
        
        <!-- 隐藏互动层 -->
        <div class="interactive-overlay" id="interactiveOverlay"></div>
        <div class="interactive-panel" id="interactivePanel">
            <button class="interactive-btn" onclick="toggleSpeech()">🎤 语音开关</button>
            <button class="interactive-btn" onclick="changeTopic()">🔄 切换话题</button>
            <button class="interactive-btn" onclick="refreshContent()">🔄 刷新内容</button>
            <button class="interactive-btn" onclick="changeAvatar()">🖼️ 更换头像</button>
        </div>
    </div>

    <script>
        // 配置
        const CONFIG = {
            tradingBoardUrl: "https://trading-live-widget.vercel.app/",
            contentUpdateUrl: "",
            autoPlay: true
        };

        // AI头像库 - 使用Unsplash的真实人物照片
        const avatarLibrary = [
            "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200&h=200&fit=crop&crop=face&fp-x=0.5&fp-y=0.5&fp-z=1&facepad=3", // 青年男性1
            "https://images.unsplash.com/photo-1519345182560-3f2917c472ef?w=200&h=200&fit=crop&crop=face&fp-x=0.5&fp-y=0.5&fp-z=1&facepad=3", // 青年男性2
            "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=200&h=200&fit=crop&crop=face&fp-x=0.5&fp-y=0.5&fp-z=1&facepad=3", // 青年男性3
            "https://images.unsplash.com/photo-1517841905240-472988babdf9?w=200&h=200&fit=crop&crop=face&fp-x=0.5&fp-y=0.5&fp-z=1&facepad=3", // 青年男性4
            "https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=200&h=200&fit=crop&crop=face&fp-x=0.5&fp-y=0.5&fp-z=1&facepad=3"  // 青年男性5
        ];

        // 阳明侠每日一说内容库 - 更长的内容
        const dailySayings = [
            "观市如观心，市场的每一次波动都是投资者情绪的集体映射。真正的智慧不在于预测涨跌，而在于理解市场背后的心理逻辑，在众人贪婪时保持谨慎，在众人恐惧时看到机会。",
            "投资之道，贵在守正出奇。守正是坚守价值投资的本质，不为短期利益所惑；出奇是在市场异常时敢于逆向思考。只有心静如水，才能在市场的惊涛骇浪中保持方向。",
            "数字资产的世界如同浩瀚星河，既有璀璨的明星项目，也有转瞬即逝的流星。真正的价值投资者懂得区分噪音与信号，在技术革新与市场泡沫之间找到平衡点。",
            "区块链技术正在重塑信任的基石，智能合约让承诺变得不可篡改。这不仅是技术的进步，更是商业文明的进化，让诚信从道德约束变为技术保障。",
            "市场情绪如同潮汐，有涨有落是自然规律。成功的投资者不是与潮汐抗争的勇士，而是懂得顺势而为的冲浪者，在每一个浪头找到最佳的切入时机。",
            "量化交易是理性与数据的完美结合，但真正的超额收益往往来自对市场人性的深刻理解。算法可以优化执行，但战略需要人类的智慧与直觉。",
            "去中心化金融正在打破传统金融的壁垒，让每个人都能成为自己财富的真正主人。这是金融民主化的革命，也是个人主权的重要体现。",
            "在信息爆炸的时代，筛选有价值的信息比获取信息更重要。投资成功的关键往往不是知道得更多，而是能够辨别什么才是真正重要的。"
        ];

        // 新闻数据
        const newsData = [
            { title: '🚀 比特币突破关键阻力位，市场情绪转向乐观', source: '行情分析', time: '实时' },
            { title: '💎 以太坊2.0升级进展顺利，生态建设加速推进', source: '技术动态', time: '2分钟前' },
            { title: '🏦 全球央行数字货币竞赛正式拉开序幕', source: '政策观察', time: '5分钟前' },
            { title: '📊 DeFi总锁仓量再创新高，去中心化金融蓬勃发展', source: '市场数据', time: '10分钟前' }
        ];

        // 内容管理系统
        class ContentManager {
            constructor() {
                this.currentSayingIndex = 0;
                this.sayings = dailySayings;
                this.currentAvatarIndex = 0;
            }
            
            getCurrentSaying() {
                return this.sayings[this.currentSayingIndex];
            }
            
            nextSaying() {
                this.currentSayingIndex = (this.currentSayingIndex + 1) % this.sayings.length;
                return this.getCurrentSaying();
            }
            
            getCurrentAvatar() {
                return avatarLibrary[this.currentAvatarIndex];
            }
            
            nextAvatar() {
                this.currentAvatarIndex = (this.currentAvatarIndex + 1) % avatarLibrary.length;
                return this.getCurrentAvatar();
            }
            
            async loadRemoteContent() {
                if (!CONFIG.contentUpdateUrl) return;
                try {
                    const response = await fetch(CONFIG.contentUpdateUrl);
                    const remoteData = await response.json();
                    if (remoteData.sayings) this.sayings = remoteData.sayings;
                    if (remoteData.news) {
                        newsData.length = 0;
                        newsData.push(...remoteData.news);
                    }
                } catch (error) {
                    console.log('使用本地内容库');
                }
            }
        }

        // 初始化新闻滚动
        function initNewsScroll() {
            const newsContent = document.getElementById('newsContent');
            const newsItemsHTML = newsData.map(news => `
                <div class="news-item">
                    <div class="news-title">${news.title}</div>
                </div>
            `).join('');
            newsContent.innerHTML = newsItemsHTML + newsItemsHTML;
        }

        // 更新内容显示
        function updateSayingDisplay() {
            const saying = contentManager.getCurrentSaying();
            document.getElementById('sayingContent').textContent = saying;
        }

        // 更新头像显示
        function updateAvatarDisplay() {
            const avatarUrl = contentManager.getCurrentAvatar();
            document.getElementById('aiAvatar').src = avatarUrl;
        }

        // 更换头像
        function changeAvatar() {
            contentManager.nextAvatar();
            updateAvatarDisplay();
            interactiveSystem.hidePanel();
        }

        // 语音合成系统
        class SpeechSystem {
            constructor() {
                this.synth = window.speechSynthesis;
                this.isSpeaking = false;
            }
            
            speak(text) {
                if (this.isSpeaking) this.stop();
                
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.85;
                utterance.pitch = 1;
                utterance.volume = 0.8;
                
                utterance.onstart = () => {
                    this.isSpeaking = true;
                    this.updateSpeechUI(true);
                };
                
                utterance.onend = () => {
                    this.isSpeaking = false;
                    this.updateSpeechUI(false);
                };
                
                this.synth.speak(utterance);
            }
            
            stop() {
                if (this.isSpeaking) {
                    this.synth.cancel();
                    this.isSpeaking = false;
                    this.updateSpeechUI(false);
                }
            }
            
            updateSpeechUI(speaking) {
                const content = document.getElementById('sayingContent');
                const status = document.getElementById('speechStatus');
                const avatar = document.getElementById('aiAvatar');
                
                if (speaking) {
                    content.classList.add('speaking');
                    status.textContent = '🎙️ 语音播报中...';
                    avatar.style.animation = 'float 2s ease-in-out infinite';
                } else {
                    content.classList.remove('speaking');
                    status.textContent = '✅ 播报完成';
                    avatar.style.animation = 'none';
                }
            }
        }

        // 互动系统
        class InteractiveSystem {
            constructor() {
                this.isPanelVisible = false;
            }
            
            init() {
                const overlay = document.getElementById('interactiveOverlay');
                const panel = document.getElementById('interactivePanel');
                
                overlay.addEventListener('dblclick', () => {
                    this.togglePanel();
                });
                
                document.addEventListener('click', (e) => {
                    if (!panel.contains(e.target) && !overlay.contains(e.target)) {
                        this.hidePanel();
                    }
                });
            }
            
            togglePanel() {
                const panel = document.getElementById('interactivePanel');
                this.isPanelVisible = !this.isPanelVisible;
                panel.style.display = this.isPanelVisible ? 'block' : 'none';
            }
            
            hidePanel() {
                const panel = document.getElementById('interactivePanel');
                panel.style.display = 'none';
                this.isPanelVisible = false;
            }
        }

        // 全局变量
        let contentManager;
        let speechSystem;
        let interactiveSystem;
        let speechInterval;

        // 初始化函数
        async function init() {
            contentManager = new ContentManager();
            speechSystem = new SpeechSystem();
            interactiveSystem = new InteractiveSystem();
            
            await contentManager.loadRemoteContent();
            initNewsScroll();
            updateSayingDisplay();
            updateAvatarDisplay();
            interactiveSystem.init();
            
            if (CONFIG.autoPlay) {
                startAutoSpeech();
            }
        }

        function startAutoSpeech() {
            setTimeout(() => {
                speakCurrentSaying();
            }, 5000);
            
            speechInterval = setInterval(() => {
                changeTopic();
            }, 120000);
        }

        function speakCurrentSaying() {
            const saying = contentManager.getCurrentSaying();
            speechSystem.speak(saying);
        }

        function toggleSpeech() {
            if (speechSystem.isSpeaking) {
                speechSystem.stop();
                clearInterval(speechInterval);
            } else {
                speakCurrentSaying();
                speechInterval = setInterval(() => {
                    changeTopic();
                }, 120000);
            }
            interactiveSystem.hidePanel();
        }

        function changeTopic() {
            speechSystem.stop();
            contentManager.nextSaying();
            updateSayingDisplay();
            setTimeout(() => {
                speakCurrentSaying();
            }, 1000);
            interactiveSystem.hidePanel();
        }

        async function refreshContent() {
            await contentManager.loadRemoteContent();
            initNewsScroll();
            updateSayingDisplay();
            interactiveSystem.hidePanel();
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
